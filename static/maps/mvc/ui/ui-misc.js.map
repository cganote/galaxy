{"version":3,"sources":["mvc/ui/ui-misc.js"],"names":["Label","Backbone","View","extend","tagName","initialize","options","model","Model","setElement","$","listenTo","render","title","new_title","set","value","get","$el","removeClass","addClass","html","Message","message","status","cls","persistent","fade","active_tab","update","messageForDisplay","timeout","window","clearTimeout","self","setTimeout","fadeOut","_","escape","UnescapedMessage","Input","type","placeholder","disabled","readonly","visible","area","color","style","events","input","new_val","undefined","attr","id","css","datalist","isArray","length","autocomplete","source","request","response","change","_onchange","val","each","attr_name","removeAttr","Hidden","append","$info","$hidden","show","text","hide","TextSelect","select","SelectClass","onchange","on","wait","unwait","element","textmode","input_def","data","push","label","option","v","textable","Upload","$file","$text","$wait","_readFile","e","file","target","files","reader","FileReader","onload","result","readAsText","Button","Buttons","ButtonDefault","ButtonIcon","ButtonCheck","ButtonMenu","ButtonLink","Checkbox","Options","RadioButton","Radio","Select","Slider","Drilldown","Modal"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-misc.js","sourcesContent":["/**\n *  This class contains backbone wrappers for basic ui elements such as Images, Labels, Buttons, Input fields etc.\n */\nimport Select from \"mvc/ui/ui-select-default\";\nimport Slider from \"mvc/ui/ui-slider\";\nimport Options from \"mvc/ui/ui-options\";\nimport Drilldown from \"mvc/ui/ui-drilldown\";\nimport Buttons from \"mvc/ui/ui-buttons\";\nimport Modal from \"mvc/ui/ui-modal\";\n\n/** Label wrapper */\nexport var Label = Backbone.View.extend({\n    tagName: \"label\",\n    initialize: function(options) {\n        this.model = (options && options.model) || new Backbone.Model(options);\n        this.tagName = options.tagName || this.tagName;\n        this.setElement($(`<${this.tagName}/>`));\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n    title: function(new_title) {\n        this.model.set(\"title\", new_title);\n    },\n    value: function() {\n        return this.model.get(\"title\");\n    },\n    render: function() {\n        this.$el\n            .removeClass()\n            .addClass(\"ui-label\")\n            .addClass(this.model.get(\"cls\"))\n            .html(this.model.get(\"title\"));\n        return this;\n    }\n});\n\n/** Displays messages used e.g. in the tool form */\nexport var Message = Backbone.View.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                message: null,\n                status: \"info\",\n                cls: \"\",\n                persistent: false,\n                fade: true\n            }).set(options);\n        this.listenTo(this.model, \"change\", this.render, this);\n        if (options && options.active_tab) {\n            this.active_tab = options.active_tab;\n        }\n        this.render();\n    },\n    update: function(options) {\n        this.model.set(options);\n    },\n    render: function() {\n        this.$el\n            .removeClass()\n            .addClass(\"ui-message\")\n            .addClass(this.model.get(\"cls\"));\n        var status = this.model.get(\"status\");\n        if (this.model.get(\"large\")) {\n            this.$el.addClass(\n                `${(status == \"success\" && \"done\") || (status == \"danger\" && \"error\") || status}messagelarge`\n            );\n        } else {\n            this.$el.addClass(\"alert\").addClass(`alert-${status}`);\n        }\n        if (this.model.get(\"message\")) {\n            this.$el.html(this.messageForDisplay());\n            this.$el[this.model.get(\"fade\") ? \"fadeIn\" : \"show\"]();\n            this.timeout && window.clearTimeout(this.timeout);\n            if (!this.model.get(\"persistent\")) {\n                var self = this;\n                this.timeout = window.setTimeout(() => {\n                    self.model.set(\"message\", \"\");\n                }, 3000);\n            }\n        } else {\n            this.$el.fadeOut();\n        }\n        return this;\n    },\n    messageForDisplay: function() {\n        return _.escape(this.model.get(\"message\"));\n    }\n});\n\nexport var UnescapedMessage = Message.extend({\n    messageForDisplay: function() {\n        return this.model.get(\"message\");\n    }\n});\n\n/** Renders an input element used e.g. in the tool form */\nexport var Input = Backbone.View.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                type: \"text\",\n                placeholder: \"\",\n                disabled: false,\n                readonly: false,\n                visible: true,\n                cls: \"\",\n                area: false,\n                color: null,\n                style: null\n            }).set(options);\n        this.tagName = this.model.get(\"area\") ? \"textarea\" : \"input\";\n        this.setElement($(`<${this.tagName}/>`));\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n    events: {\n        input: \"_onchange\"\n    },\n    value: function(new_val) {\n        new_val !== undefined && this.model.set(\"value\", typeof new_val === \"string\" ? new_val : \"\");\n        return this.model.get(\"value\");\n    },\n    render: function() {\n        var self = this;\n        this.$el\n            .removeClass()\n            .addClass(`ui-${this.tagName}`)\n            .addClass(this.model.get(\"cls\"))\n            .addClass(this.model.get(\"style\"))\n            .attr(\"id\", this.model.id)\n            .attr(\"type\", this.model.get(\"type\"))\n            .attr(\"placeholder\", this.model.get(\"placeholder\"))\n            .css(\"color\", this.model.get(\"color\") || \"\")\n            .css(\"border-color\", this.model.get(\"color\") || \"\");\n        var datalist = this.model.get(\"datalist\");\n        if ($.isArray(datalist) && datalist.length > 0) {\n            this.$el.autocomplete({\n                source: function(request, response) {\n                    response(self.model.get(\"datalist\"));\n                },\n                change: function() {\n                    self._onchange();\n                }\n            });\n        }\n        if (this.model.get(\"value\") !== this.$el.val()) {\n            this.$el.val(this.model.get(\"value\"));\n        }\n        _.each([\"readonly\", \"disabled\"], attr_name => {\n            self.model.get(attr_name) ? self.$el.attr(attr_name, true) : self.$el.removeAttr(attr_name);\n        });\n        this.$el[this.model.get(\"visible\") ? \"show\" : \"hide\"]();\n        return this;\n    },\n    _onchange: function() {\n        this.value(this.$el.val());\n        this.model.get(\"onchange\") && this.model.get(\"onchange\")(this.model.get(\"value\"));\n    }\n});\n\n/** Creates a hidden element input field used e.g. in the tool form */\nexport var Hidden = Backbone.View.extend({\n    initialize: function(options) {\n        this.model = (options && options.model) || new Backbone.Model(options);\n        this.setElement(\n            $(\"<div/>\")\n                .append((this.$info = $(\"<div/>\")))\n                .append((this.$hidden = $(\"<div/>\")))\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n    value: function(new_val) {\n        new_val !== undefined && this.model.set(\"value\", new_val);\n        return this.model.get(\"value\");\n    },\n    render: function() {\n        this.$el.attr(\"id\", this.model.id);\n        this.$hidden.val(this.model.get(\"value\"));\n        this.model.get(\"info\") ? this.$info.show().text(this.model.get(\"info\")) : this.$info.hide();\n        return this;\n    }\n});\n\n/** Creates an input element which switches between select and text field */\nexport var TextSelect = Backbone.View.extend({\n    initialize: function(options) {\n        this.select = new options.SelectClass.View(options);\n        this.model = this.select.model;\n        this.text = new Input({\n            onchange: this.model.get(\"onchange\")\n        });\n        this.on(\"change\", () => {\n            if (this.model.get(\"onchange\")) {\n                this.model.get(\"onchange\")(this.value());\n            }\n        });\n        this.setElement(\n            $(\"<div/>\")\n                .append(this.select.$el)\n                .append(this.text.$el)\n        );\n        this.update(options);\n    },\n    wait: function() {\n        this.select.wait();\n    },\n    unwait: function() {\n        this.select.unwait();\n    },\n    value: function(new_val) {\n        var element = this.textmode ? this.text : this.select;\n        return element.value(new_val);\n    },\n    update: function(input_def) {\n        var data = input_def.data;\n        if (!data) {\n            data = [];\n            _.each(input_def.options, option => {\n                data.push({ label: option[0], value: option[1] });\n            });\n        }\n        var v = this.value();\n        this.textmode = input_def.textable && (!$.isArray(data) || data.length === 0);\n        this.text.$el[this.textmode ? \"show\" : \"hide\"]();\n        this.select.$el[this.textmode ? \"hide\" : \"show\"]();\n        this.select.update({ data: data });\n        this.value(v);\n    }\n});\n\n/** Creates a upload element input field */\nexport var Upload = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.model = (options && options.model) || new Backbone.Model(options);\n        this.setElement(\n            $(\"<div/>\")\n                .append((this.$info = $(\"<div/>\")))\n                .append(\n                    (this.$file = $(\"<input/>\")\n                        .attr(\"type\", \"file\")\n                        .addClass(\"ui-margin-bottom\"))\n                )\n                .append(\n                    (this.$text = $(\"<textarea/>\")\n                        .addClass(\"ui-textarea\")\n                        .attr(\"disabled\", true))\n                )\n                .append((this.$wait = $(\"<i/>\").addClass(\"fa fa-spinner fa-spin\")))\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.$file.on(\"change\", e => {\n            self._readFile(e);\n        });\n        this.render();\n    },\n    value: function(new_val) {\n        new_val !== undefined && this.model.set(\"value\", new_val);\n        return this.model.get(\"value\");\n    },\n    render: function() {\n        this.$el.attr(\"id\", this.model.id);\n        this.model.get(\"info\") ? this.$info.show().text(this.model.get(\"info\")) : this.$info.hide();\n        this.model.get(\"value\") ? this.$text.text(this.model.get(\"value\")).show() : this.$text.hide();\n        this.model.get(\"wait\") ? this.$wait.show() : this.$wait.hide();\n        return this;\n    },\n    _readFile: function(e) {\n        var self = this;\n        var file = e.target.files && e.target.files[0];\n        if (file) {\n            var reader = new FileReader();\n            reader.onload = function() {\n                self.model.set({ wait: false, value: this.result });\n            };\n            this.model.set({ wait: true, value: null });\n            reader.readAsText(file);\n        }\n    }\n});\n\n/* Make more Ui stuff directly available at this namespace (for backwards\n * compatibility).  We should eliminate this practice, though, and just require\n * what we need where we need it, allowing for better package optimization.\n */\n\nexport let Button = Buttons.ButtonDefault;\nexport let ButtonIcon = Buttons.ButtonIcon;\nexport let ButtonCheck = Buttons.ButtonCheck;\nexport let ButtonMenu = Buttons.ButtonMenu;\nexport let ButtonLink = Buttons.ButtonLink;\nexport let Checkbox = Options.Checkbox;\nexport let RadioButton = Options.RadioButton;\nexport let Radio = Options.Radio;\nexport { Select, Slider, Drilldown };\n\nexport default {\n    Button: Buttons.ButtonDefault,\n    ButtonIcon: Buttons.ButtonIcon,\n    ButtonCheck: Buttons.ButtonCheck,\n    ButtonMenu: Buttons.ButtonMenu,\n    ButtonLink: Buttons.ButtonLink,\n    Input: Input,\n    Label: Label,\n    Message: Message,\n    UnescapedMessage: UnescapedMessage,\n    Upload: Upload,\n    Modal: Modal,\n    RadioButton: Options.RadioButton,\n    Checkbox: Options.Checkbox,\n    Radio: Options.Radio,\n    Select: Select,\n    TextSelect: TextSelect,\n    Hidden: Hidden,\n    Slider: Slider,\n    Drilldown: Drilldown\n};\n"]}